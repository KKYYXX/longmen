# è”ç³»äººç®¡ç†åŠŸèƒ½ä¼˜åŒ–è¯´æ˜

## ä¼˜åŒ–ç›®æ ‡

æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œå¯¹åäº”é¡¹é¡¹ç›®æ·»åŠ é¡µé¢çš„è”ç³»äººéƒ¨åˆ†è¿›è¡Œä¼˜åŒ–ï¼š
1. å»æ‰"è”ç³»äººèŒåŠ¡"ä¸€æ 
2. å°†"è”ç³»äººå§“å"å’Œ"è”ç³»æ–¹å¼"åˆå¹¶ä¸ºä¸€ä¸ª"è”ç³»äººä¿¡æ¯"æ 
3. åœ¨åˆå¹¶åçš„æ ç›®ä¸­æ·»åŠ è”ç³»äººç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒæ·»åŠ å¤šä¸ªè”ç³»äºº

## ä¿®æ”¹å†…å®¹

### 1. æ•°æ®ç»“æ„è°ƒæ•´

**æ–‡ä»¶**ï¼š`pages/fifteenprojects_add_project/fifteenprojects_add_project.js`

#### 1.1 é¡¹ç›®å­—æ®µé…ç½®
**ä¿®æ”¹å‰**ï¼š
```javascript
{ name: 'è”ç³»äººå§“å', key: 'contactName', type: 'text', required: false, placeholder: 'è¯·è¾“å…¥è”ç³»äººå§“å' },
{ name: 'è”ç³»äººèŒåŠ¡', key: 'contactPosition', type: 'text', required: false, placeholder: 'è¯·è¾“å…¥è”ç³»äººèŒåŠ¡' },
{ name: 'è”ç³»æ–¹å¼', key: 'contactPhone', type: 'text', required: false, placeholder: 'è¯·è¾“å…¥è”ç³»æ–¹å¼' },
```

**ä¿®æ”¹å**ï¼š
```javascript
{ name: 'è”ç³»äººä¿¡æ¯', key: 'contacts', type: 'contacts', required: false, placeholder: 'æ·»åŠ è”ç³»äºº' },
```

#### 1.2 æ•°æ®å­—æ®µæ–°å¢
```javascript
data: {
  // åŸæœ‰å­—æ®µ...
  // è”ç³»äººç›¸å…³æ•°æ®
  contacts: [],                    // è”ç³»äººåˆ—è¡¨
  showContactModal: false,         // æ˜¯å¦æ˜¾ç¤ºè”ç³»äººå¼¹çª—
  currentContact: {                // å½“å‰ç¼–è¾‘çš„è”ç³»äºº
    name: '',
    phone: ''
  },
  editingContactIndex: -1          // æ­£åœ¨ç¼–è¾‘çš„è”ç³»äººç´¢å¼•ï¼ˆ-1è¡¨ç¤ºæ–°å¢ï¼‰
}
```

### 2. è”ç³»äººç®¡ç†åŠŸèƒ½

#### 2.1 æ–°å¢çš„æ–¹æ³•

**æ˜¾ç¤ºæ·»åŠ è”ç³»äººå¼¹çª—**ï¼š
```javascript
showAddContactModal() {
  this.setData({
    showContactModal: true,
    currentContact: { name: '', phone: '' },
    editingContactIndex: -1
  });
}
```

**æ˜¾ç¤ºç¼–è¾‘è”ç³»äººå¼¹çª—**ï¼š
```javascript
showEditContactModal(e) {
  const index = e.currentTarget.dataset.index;
  const contact = this.data.contacts[index];
  this.setData({
    showContactModal: true,
    currentContact: { name: contact.name, phone: contact.phone },
    editingContactIndex: index
  });
}
```

**ä¿å­˜è”ç³»äºº**ï¼š
```javascript
saveContact() {
  // éªŒè¯è¾“å…¥
  // ä¿å­˜æˆ–æ›´æ–°è”ç³»äºº
  // æ›´æ–°é¡¹ç›®æ•°æ®
  // å…³é—­å¼¹çª—å¹¶æ˜¾ç¤ºæˆåŠŸæç¤º
}
```

**åˆ é™¤è”ç³»äºº**ï¼š
```javascript
deleteContact(e) {
  // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
  // åˆ é™¤æŒ‡å®šè”ç³»äºº
  // æ›´æ–°é¡¹ç›®æ•°æ®
}
```

### 3. ç”¨æˆ·ç•Œé¢ä¼˜åŒ–

**æ–‡ä»¶**ï¼š`pages/fifteenprojects_add_project/fifteenprojects_add_project.wxml`

#### 3.1 è”ç³»äººåˆ—è¡¨æ˜¾ç¤º
```xml
<!-- è”ç³»äººç®¡ç† -->
<view wx:if="{{item.type === 'contacts'}}" class="contacts-container">
  <!-- è”ç³»äººåˆ—è¡¨ -->
  <view wx:if="{{contacts.length > 0}}" class="contacts-list">
    <view class="contact-item" wx:for="{{contacts}}" wx:key="index">
      <view class="contact-info">
        <text class="contact-name">{{item.name}}</text>
        <text class="contact-phone">{{item.phone}}</text>
      </view>
      <view class="contact-actions">
        <text class="contact-edit-btn" bindtap="showEditContactModal" data-index="{{index}}">ç¼–è¾‘</text>
        <text class="contact-delete-btn" bindtap="deleteContact" data-index="{{index}}">åˆ é™¤</text>
      </view>
    </view>
  </view>
  
  <!-- æ·»åŠ è”ç³»äººæŒ‰é’® -->
  <view class="add-contact-btn" bindtap="showAddContactModal">
    <text class="add-contact-icon">+</text>
    <text class="add-contact-text">æ·»åŠ è”ç³»äºº</text>
  </view>
</view>
```

#### 3.2 è”ç³»äººç¼–è¾‘å¼¹çª—
```xml
<!-- è”ç³»äººå¼¹çª— -->
<view class="contact-modal" wx:if="{{showContactModal}}">
  <view class="contact-modal-mask" bindtap="closeContactModal"></view>
  <view class="contact-modal-content">
    <view class="contact-modal-header">
      <text class="contact-modal-title">
        {{editingContactIndex >= 0 ? 'ç¼–è¾‘è”ç³»äºº' : 'æ·»åŠ è”ç³»äºº'}}
      </text>
      <text class="contact-modal-close" bindtap="closeContactModal">âœ•</text>
    </view>
    
    <view class="contact-modal-body">
      <view class="contact-form-item">
        <text class="contact-form-label">å§“å *</text>
        <input class="contact-form-input" placeholder="è¯·è¾“å…¥è”ç³»äººå§“å" 
               value="{{currentContact.name}}" bindinput="onContactNameInput" />
      </view>
      
      <view class="contact-form-item">
        <text class="contact-form-label">è”ç³»æ–¹å¼ *</text>
        <input class="contact-form-input" placeholder="è¯·è¾“å…¥æ‰‹æœºå·æˆ–å…¶ä»–è”ç³»æ–¹å¼" 
               value="{{currentContact.phone}}" bindinput="onContactPhoneInput" />
      </view>
    </view>
    
    <view class="contact-modal-footer">
      <button class="contact-cancel-btn" bindtap="closeContactModal">å–æ¶ˆ</button>
      <button class="contact-save-btn" bindtap="saveContact">ä¿å­˜</button>
    </view>
  </view>
</view>
```

### 4. æ ·å¼è®¾è®¡

**æ–‡ä»¶**ï¼š`pages/fifteenprojects_add_project/fifteenprojects_add_project.wxss`

#### 4.1 è”ç³»äººåˆ—è¡¨æ ·å¼
- **è”ç³»äººå¡ç‰‡**ï¼šç°è‰²èƒŒæ™¯ï¼Œåœ†è§’è¾¹æ¡†ï¼Œæ¸…æ™°çš„å±‚æ¬¡æ„Ÿ
- **è”ç³»äººä¿¡æ¯**ï¼šå§“ååŠ ç²—æ˜¾ç¤ºï¼Œè”ç³»æ–¹å¼è¾ƒå°å­—ä½“
- **æ“ä½œæŒ‰é’®**ï¼šç¼–è¾‘æŒ‰é’®è“è‰²ï¼Œåˆ é™¤æŒ‰é’®çº¢è‰²ï¼Œæœ‰æ‚¬åœæ•ˆæœ

#### 4.2 æ·»åŠ æŒ‰é’®æ ·å¼
- **è™šçº¿è¾¹æ¡†**ï¼šè“è‰²è™šçº¿è¾¹æ¡†ï¼Œè¡¨ç¤ºå¯ç‚¹å‡»æ·»åŠ 
- **å›¾æ ‡å’Œæ–‡å­—**ï¼šåŠ å·å›¾æ ‡ + "æ·»åŠ è”ç³»äºº"æ–‡å­—
- **äº¤äº’æ•ˆæœ**ï¼šç‚¹å‡»æ—¶æœ‰ç¼©æ”¾åŠ¨ç”»

#### 4.3 å¼¹çª—æ ·å¼
- **é®ç½©å±‚**ï¼šåŠé€æ˜é»‘è‰²èƒŒæ™¯
- **å¼¹çª—å†…å®¹**ï¼šç™½è‰²èƒŒæ™¯ï¼Œåœ†è§’ï¼Œé˜´å½±æ•ˆæœ
- **è¡¨å•æ ·å¼**ï¼šç°ä»£åŒ–çš„è¾“å…¥æ¡†è®¾è®¡ï¼Œèšç„¦æ—¶é«˜äº®

### 5. æ•°æ®å…¼å®¹æ€§å¤„ç†

#### 5.1 ä¿å­˜æ—¶çš„æ•°æ®è½¬æ¢
```javascript
// æ„å»ºæäº¤æ•°æ®
const submitData = {
  ...projectData,
  createDate: new Date().toISOString().split('T')[0],
  // ç¡®ä¿è”ç³»äººæ•°æ®è¢«åŒ…å«
  contacts: this.data.contacts || []
};

// ä¸ºäº†å…¼å®¹æ€§ï¼Œå¦‚æœæœ‰è”ç³»äººï¼Œè®¾ç½®ç¬¬ä¸€ä¸ªè”ç³»äººä¸ºä¸»è¦è”ç³»äºº
if (this.data.contacts && this.data.contacts.length > 0) {
  const primaryContact = this.data.contacts[0];
  submitData.contactName = primaryContact.name;
  submitData.contactPhone = primaryContact.phone;
  submitData.contactPosition = ''; // èŒåŠ¡å­—æ®µå·²ç§»é™¤ï¼Œè®¾ä¸ºç©º
}
```

#### 5.2 åˆå§‹åŒ–æ—¶çš„æ•°æ®å¤„ç†
```javascript
onLoad() {
  const projectData = {};
  this.data.projectColumns.forEach(column => {
    if (column.type === 'slider') {
      projectData[column.key] = 0;
    } else if (column.type === 'contacts') {
      projectData[column.key] = [];  // è”ç³»äººå­—æ®µåˆå§‹åŒ–ä¸ºç©ºæ•°ç»„
    } else {
      projectData[column.key] = '';
    }
  });
  this.setData({ projectData });
}
```

## åŠŸèƒ½ç‰¹æ€§

### âœ… æ–°å¢åŠŸèƒ½

1. **å¤šè”ç³»äººæ”¯æŒ**ï¼š
   - å¯ä»¥æ·»åŠ å¤šä¸ªè”ç³»äºº
   - æ¯ä¸ªè”ç³»äººåŒ…å«å§“åå’Œè”ç³»æ–¹å¼
   - æ”¯æŒç¼–è¾‘å’Œåˆ é™¤æ“ä½œ

2. **ç›´è§‚çš„ç”¨æˆ·ç•Œé¢**ï¼š
   - è”ç³»äººä»¥å¡ç‰‡å½¢å¼å±•ç¤º
   - æ¸…æ™°çš„æ·»åŠ æŒ‰é’®
   - æ¨¡æ€å¼¹çª—ç¼–è¾‘ä½“éªŒ

3. **æ•°æ®éªŒè¯**ï¼š
   - å§“åå’Œè”ç³»æ–¹å¼ä¸ºå¿…å¡«é¡¹
   - è¾“å…¥éªŒè¯å’Œé”™è¯¯æç¤º
   - é‡å¤æ“ä½œç¡®è®¤

4. **å…¼å®¹æ€§ä¿è¯**ï¼š
   - ä¿å­˜æ—¶è‡ªåŠ¨è®¾ç½®ä¸»è¦è”ç³»äººå­—æ®µ
   - å‘åå…¼å®¹åŸæœ‰æ•°æ®ç»“æ„
   - å¹³æ»‘çš„æ•°æ®è¿ç§»

### âŒ ç§»é™¤åŠŸèƒ½

1. **è”ç³»äººèŒåŠ¡å­—æ®µ**ï¼š
   - ä¸å†æ”¶é›†èŒåŠ¡ä¿¡æ¯
   - ç®€åŒ–è”ç³»äººæ•°æ®ç»“æ„
   - ä¸“æ³¨äºæ ¸å¿ƒè”ç³»ä¿¡æ¯

### ğŸ”„ ä¼˜åŒ–åŠŸèƒ½

1. **è”ç³»äººç®¡ç†**ï¼š
   - ä»å•ä¸€è”ç³»äººå‡çº§ä¸ºå¤šè”ç³»äººç®¡ç†
   - æ›´çµæ´»çš„è”ç³»äººä¿¡æ¯ç»´æŠ¤
   - æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

## ä½¿ç”¨æŒ‡å—

### æ·»åŠ è”ç³»äºº
1. åœ¨"è”ç³»äººä¿¡æ¯"æ ç‚¹å‡»"æ·»åŠ è”ç³»äºº"æŒ‰é’®
2. åœ¨å¼¹çª—ä¸­è¾“å…¥å§“åå’Œè”ç³»æ–¹å¼
3. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®å®Œæˆæ·»åŠ 

### ç¼–è¾‘è”ç³»äºº
1. ç‚¹å‡»è”ç³»äººå¡ç‰‡å³ä¾§çš„"ç¼–è¾‘"æŒ‰é’®
2. åœ¨å¼¹çª—ä¸­ä¿®æ”¹å§“åæˆ–è”ç³»æ–¹å¼
3. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®å®Œæˆä¿®æ”¹

### åˆ é™¤è”ç³»äºº
1. ç‚¹å‡»è”ç³»äººå¡ç‰‡å³ä¾§çš„"åˆ é™¤"æŒ‰é’®
2. åœ¨ç¡®è®¤å¯¹è¯æ¡†ä¸­ç‚¹å‡»"ç¡®å®š"
3. è”ç³»äººå°†è¢«ä»åˆ—è¡¨ä¸­ç§»é™¤

## æŠ€æœ¯å®ç°

### æ•°æ®æµç¨‹
```
ç”¨æˆ·æ“ä½œ â†’ å¼¹çª—æ˜¾ç¤º â†’ æ•°æ®éªŒè¯ â†’ æ›´æ–°çŠ¶æ€ â†’ ç•Œé¢åˆ·æ–° â†’ ä¿å­˜åˆ°é¡¹ç›®æ•°æ®
```

### çŠ¶æ€ç®¡ç†
- `contacts`ï¼šè”ç³»äººåˆ—è¡¨æ•°ç»„
- `showContactModal`ï¼šæ§åˆ¶å¼¹çª—æ˜¾ç¤º/éšè—
- `currentContact`ï¼šå½“å‰ç¼–è¾‘çš„è”ç³»äººæ•°æ®
- `editingContactIndex`ï¼šåŒºåˆ†æ–°å¢(-1)å’Œç¼–è¾‘(>=0)æ¨¡å¼

### äº‹ä»¶å¤„ç†
- `showAddContactModal`ï¼šæ˜¾ç¤ºæ–°å¢è”ç³»äººå¼¹çª—
- `showEditContactModal`ï¼šæ˜¾ç¤ºç¼–è¾‘è”ç³»äººå¼¹çª—
- `saveContact`ï¼šä¿å­˜è”ç³»äººæ•°æ®
- `deleteContact`ï¼šåˆ é™¤è”ç³»äºº
- `closeContactModal`ï¼šå…³é—­å¼¹çª—

## æ€»ç»“

é€šè¿‡è¿™æ¬¡ä¼˜åŒ–ï¼š

1. **ç®€åŒ–äº†æ•°æ®ç»“æ„**ï¼šå»æ‰äº†ä¸å¿…è¦çš„èŒåŠ¡å­—æ®µ
2. **å¢å¼ºäº†åŠŸèƒ½æ€§**ï¼šæ”¯æŒå¤šè”ç³»äººç®¡ç†
3. **æ”¹å–„äº†ç”¨æˆ·ä½“éªŒ**ï¼šç›´è§‚çš„ç•Œé¢å’Œæµç•…çš„æ“ä½œ
4. **ä¿è¯äº†å…¼å®¹æ€§**ï¼šå‘åå…¼å®¹åŸæœ‰æ•°æ®æ ¼å¼
5. **æå‡äº†å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„ä»£ç ç»“æ„å’Œå®Œå–„çš„é”™è¯¯å¤„ç†

ç°åœ¨ç”¨æˆ·å¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†é¡¹ç›®è”ç³»äººä¿¡æ¯ï¼Œæ”¯æŒæ·»åŠ å¤šä¸ªè”ç³»äººï¼Œå¹¶ä¸”ç•Œé¢æ›´åŠ ç°ä»£åŒ–å’Œæ˜“ç”¨ï¼ğŸ‰
