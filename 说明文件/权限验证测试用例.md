# 权限验证测试用例

## 测试场景1：未登录用户
**前置条件**：用户未登录（isLoggedIn = false）

**操作步骤**：
1. 进入typicalcases页面
2. 点击"案例修改"按钮

**预期结果**：
- 弹出提示框："请先进行登录"
- 提供"去登录"和"取消"按钮
- 点击"去登录"跳转到personal页面

## 测试场景2：已登录但无权限用户
**前置条件**：
- 用户已登录（isLoggedIn = true）
- 用户信息：{name: "测试用户", phone: "13800000000"}
- 后端返回权限列表：[{name: "张三", phone: "13800138000"}]

**操作步骤**：
1. 进入typicalcases页面
2. 点击"案例修改"按钮

**预期结果**：
- 显示加载提示："验证权限中..."
- 调用后端接口：GET /user/alter_model
- 弹出提示框："您暂无修改案例的权限"

## 测试场景3：已登录且有权限用户
**前置条件**：
- 用户已登录（isLoggedIn = true）
- 用户信息：{name: "张三", phone: "13800138000"}
- 后端返回权限列表：[{name: "张三", phone: "13800138000"}]

**操作步骤**：
1. 进入typicalcases页面
2. 点击"案例修改"按钮

**预期结果**：
- 显示加载提示："验证权限中..."
- 调用后端接口：GET /user/alter_model
- 成功跳转到typicalcasesalter页面

## 测试场景4：网络错误
**前置条件**：
- 用户已登录
- 网络连接失败

**操作步骤**：
1. 进入typicalcases页面
2. 点击"案例修改"按钮

**预期结果**：
- 显示加载提示："验证权限中..."
- 弹出提示框："网络连接失败，请检查网络后重试"

## 测试场景5：后端接口错误
**前置条件**：
- 用户已登录
- 后端返回非200状态码

**操作步骤**：
1. 进入typicalcases页面
2. 点击"案例修改"按钮

**预期结果**：
- 显示加载提示："验证权限中..."
- 弹出提示框："权限验证失败，请稍后重试"

## 权限验证逻辑
```javascript
// 检查用户是否在授权列表中
checkUserInAuthorizedList(currentUser, authorizedUsers) {
  if (!currentUser || !authorizedUsers || !Array.isArray(authorizedUsers)) {
    return false;
  }

  // 遍历授权用户列表，检查姓名和手机号是否匹配
  for (let authorizedUser of authorizedUsers) {
    if (authorizedUser.name === currentUser.name && 
        authorizedUser.phone === currentUser.phone) {
      return true;
    }
  }
  
  return false;
}
```

## 注意事项
1. 权限验证基于用户的姓名和手机号进行匹配
2. 需要确保用户信息中包含name和phone字段
3. 后端接口返回的是用户数组，每个用户包含name和phone字段
4. 网络请求有超时处理，避免长时间等待 