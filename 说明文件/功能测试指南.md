# 典型案例功能测试指南

## 测试环境说明

当前系统运行在开发模式下，会模拟文件上传和预览功能。

## 测试步骤

### 1. 测试案例查询功能

**步骤：**
1. 打开小程序，进入"典型案例查询"页面
2. 查看是否显示了6个测试案例：
   - 智慧城市建设典型案例
   - 绿色能源示范园区建设案例  
   - 数字化教育改革实践案例
   - 社区治理创新案例
   - 农业现代化示范项目
   - 文化旅游融合发展案例

**预期结果：**
- 页面正常加载，显示所有案例
- 每个案例显示名称、时间、描述等信息

### 2. 测试案例详情和文件打开

**步骤：**
1. 点击任意一个案例（建议先点击"智慧城市建设典型案例"）
2. 观察页面加载过程
3. 查看是否自动弹出文件预览对话框

**预期结果：**
- 页面显示案例基本信息
- 显示主文件信息卡片
- 自动弹出文件预览对话框，显示：
  - 文件名、大小、类型
  - 相关视频信息（如果有）
  - 相关新闻链接（如果有）

### 3. 测试不同类型案例

**测试案例1：包含视频和链接的案例**
- 点击"社区治理创新案例"
- 应该显示2个视频和2个新闻链接

**测试案例2：只有链接的案例**
- 点击"农业现代化示范项目"
- 应该显示1个新闻链接，无视频

**测试案例3：只有文件的案例**
- 点击"文化旅游融合发展案例"
- 应该只显示文件信息，无其他资源

### 4. 测试文件上传功能

**步骤：**
1. 进入"典型案例添加"页面
2. 输入案例名称（必填）
3. 点击"文件上传"卡片
4. 选择文件类型（PDF或Word）
5. 确认模拟上传

**预期结果：**
- 弹出文件类型选择
- 显示模拟文件选择对话框
- 确认后显示上传进度
- 上传成功后文件出现在预览列表

### 5. 测试文件上传限制

**步骤：**
1. 在已上传一个文件的情况下
2. 再次点击"文件上传"
3. 观察系统提示

**预期结果：**
- 提示"每个案例只能上传一个文件，是否要替换当前文件？"
- 选择"确定"可以替换文件
- 选择"取消"保持原文件

### 6. 测试案例提交

**步骤：**
1. 确保已输入案例名称和上传文件
2. 可选：添加新闻链接或视频
3. 点击"预览上传效果"
4. 点击"提交所有内容"

**预期结果：**
- 显示预览信息
- 提交确认对话框显示正确信息
- 提交成功后显示成功提示

## 常见问题排查

### 问题1：文件上传没有反应
**可能原因：**
- 没有输入案例名称
- 系统处于加载状态

**解决方法：**
- 确保先输入案例名称
- 等待页面完全加载后再操作

### 问题2：案例详情页面不显示文件
**可能原因：**
- 案例数据中没有文件信息
- 页面加载未完成

**解决方法：**
- 检查案例是否包含文件
- 刷新页面重新加载

### 问题3：自动打开文件功能不工作
**可能原因：**
- 延迟时间设置问题
- 文件数据格式问题

**解决方法：**
- 手动点击文件卡片
- 检查浏览器控制台错误信息

## 开发模式特殊说明

1. **文件选择**：显示模拟对话框，不会真正选择文件
2. **文件上传**：显示进度条动画，实际保存到本地存储
3. **文件预览**：显示信息对话框，不会打开真实文件
4. **数据存储**：使用微信小程序本地存储，重新编译会清空

## 生产环境差异

1. **文件选择**：会打开真实的文件选择器
2. **文件上传**：会上传到服务器
3. **文件预览**：会打开真实的文件
4. **数据存储**：保存到服务器数据库

## 测试数据说明

系统预置了6个测试案例，涵盖不同的场景：
- 有视频有链接的案例
- 只有链接的案例  
- 只有文件的案例
- 不同文件类型的案例

这些案例可以充分测试新功能的各种情况。

## 反馈建议

测试过程中如发现问题，请记录：
1. 具体操作步骤
2. 预期结果vs实际结果
3. 错误信息（如有）
4. 设备和浏览器信息

这将有助于快速定位和解决问题。
