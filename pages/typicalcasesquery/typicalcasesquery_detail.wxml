<view class="app-container">
  <view class="texture-overlay"></view>
  <view class="light-spot"></view>
  
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ä¸»è¦å†…å®¹ -->
  <view class="main-content" wx:if="{{!loading && caseData}}">
    <!-- å¤´éƒ¨ä¿¡æ¯ -->
    <view class="header">
      <view class="back-btn" bindtap="navigateBack">
        <text class="back-icon">â†</text>
      </view>
      <view class="title-box">
        <text class="title">æ¡ˆä¾‹è¯¦æƒ…</text>
        <text class="subtitle">{{caseData.caseName}}</text>
      </view>
      <view class="share-btn" bindtap="shareCase">
        <text class="share-icon">ğŸ“¤</text>
      </view>
    </view>

    <!-- è‡ªåŠ¨æ“ä½œæç¤º -->
    <view class="auto-tip">
      <text class="tip-icon">ğŸ“„</text>
      <text class="tip-text">æ™ºèƒ½æ¨¡å¼ï¼šå°†è‡ªåŠ¨æ‰“å¼€å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</text>
    </view>

    <!-- æ–‡ä»¶å†…å®¹å±•ç¤ºåŒºåŸŸ -->
    <view class="file-content-container" wx:if="{{caseData.files && caseData.files.length > 0}}">
      <!-- æ–‡ä»¶å¤´éƒ¨ä¿¡æ¯ -->
      <view class="file-header-card">
        <view class="file-icon-large">
          <text class="icon">ğŸ“„</text>
        </view>
        <view class="file-info-large">
          <text class="file-name-large">{{caseData.files[0].fileName}}</text>
          <text class="file-size-large">{{caseData.files[0].fileSize}}</text>
        </view>
        <view class="open-btn-large" bindtap="openMainFile">
          <text class="open-text">æ‰“å¼€æ–‡ä»¶</text>
        </view>
      </view>

      <!-- æ–‡ä»¶å†…å®¹æ˜¾ç¤ºåŒºåŸŸ -->
      <view class="file-content-display" wx:if="{{fileContent}}">
        <view class="content-header">
          <text class="content-title">ğŸ“„ æ–‡ä»¶å†…å®¹</text>
        </view>
        <view class="content-body">
          <text class="content-text">{{fileContent}}</text>
        </view>
      </view>

      <!-- æ–‡ä»¶å†…å®¹æœ«å°¾çš„é™„åŠ å†…å®¹ -->
      <view class="file-appendix">
        <!-- ç›¸å…³è§†é¢‘ -->
        <view class="appendix-section" wx:if="{{caseData.videos && caseData.videos.length > 0}}">
          <view class="appendix-divider"></view>
          <text class="appendix-title">ğŸ¥ ç›¸å…³è§†é¢‘</text>
          <view class="videos-list">
            <view class="video-item-compact" wx:for="{{caseData.videos}}" wx:key="id">
              <view class="video-info-compact">
                <text class="video-icon-small">ğŸ¥</text>
                <view class="video-details-compact">
                  <text class="video-name-small">{{item.videoName}}</text>
                  <text class="video-duration-small" wx:if="{{item.videoDuration}}">{{item.videoDuration}}</text>
                </view>
              </view>
              <text class="play-btn-small" bindtap="playVideo" data-video="{{item}}">æ’­æ”¾</text>
            </view>
          </view>
        </view>

        <!-- ç›¸å…³æ–°é—» -->
        <view class="appendix-section" wx:if="{{caseData.links && caseData.links.length > 0}}">
          <view class="appendix-divider"></view>
          <text class="appendix-title">ğŸ”— ç›¸å…³æ–°é—»</text>
          <view class="links-list">
            <view class="link-item-compact" wx:for="{{caseData.links}}" wx:key="id">
              <view class="link-info-compact">
                <text class="link-icon-small">ğŸ”—</text>
                <view class="link-details-compact">
                  <text class="link-title-small">{{item.linkTitle}}</text>
                  <text class="link-url-small">{{item.linkUrl}}</text>
                </view>
              </view>
              <text class="open-btn-small" bindtap="openLink" data-link="{{item}}">æ‰“å¼€</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view class="error-container" wx:if="{{!loading && !caseData}}">
    <text class="error-icon">âŒ</text>
    <text class="error-title">åŠ è½½å¤±è´¥</text>
    <text class="error-desc">æ— æ³•è·å–æ¡ˆä¾‹è¯¦æƒ…ï¼Œè¯·é‡è¯•</text>
    <text class="retry-btn" bindtap="loadCaseDetail">é‡æ–°åŠ è½½</text>
  </view>
</view> 