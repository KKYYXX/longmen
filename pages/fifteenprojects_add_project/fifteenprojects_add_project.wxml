<view class="add-project-container">
  <view class="page-header">
    <text class="page-title">æ–°å¢é¡¹ç›®</text>
    <text class="page-subtitle">å¡«å†™å„åˆ—çš„å†…å®¹</text>
  </view>

  <view class="form-container">
    <!-- åŠ¨æ€ç”Ÿæˆè¡¨å•é¡¹ -->
    <view class="form-section">
      <text class="section-title">é¡¹ç›®ä¿¡æ¯</text>

      <view
        class="form-item"
        wx:for="{{projectColumns}}"
        wx:key="key"
      >
        <text class="form-label">
          {{item.name}}
          <text wx:if="{{item.required}}" class="required-mark">*</text>
        </text>

        <!-- æ–‡æœ¬è¾“å…¥ -->
        <input
          wx:if="{{item.type === 'text'}}"
          class="form-input"
          placeholder="{{item.placeholder}}"
          value="{{projectData[item.key]}}"
          bindinput="onFieldInput"
          data-field="{{item.key}}"
        />

        <!-- å¤šè¡Œæ–‡æœ¬è¾“å…¥ -->
        <textarea
          wx:if="{{item.type === 'textarea'}}"
          class="form-textarea"
          placeholder="{{item.placeholder}}"
          value="{{projectData[item.key]}}"
          bindinput="onFieldInput"
          data-field="{{item.key}}"
          maxlength="1000"
        />

        <!-- æ—¥æœŸé€‰æ‹© -->
        <picker
          wx:if="{{item.type === 'date'}}"
          class="form-picker"
          mode="date"
          value="{{projectData[item.key]}}"
          bindchange="onPickerChange"
          data-field="{{item.key}}"
        >
          <view class="picker-display">
            {{projectData[item.key] || item.placeholder}}
          </view>
        </picker>

        <!-- é€‰æ‹©å™¨ -->
        <picker
          wx:if="{{item.type === 'select'}}"
          class="form-picker"
          bindchange="onPickerChange"
          range="{{item.options}}"
          data-field="{{item.key}}"
        >
          <view class="picker-display">
            {{projectData[item.key] || 'è¯·é€‰æ‹©' + item.name}}
          </view>
        </picker>

        <!-- æ»‘å— -->
        <view wx:if="{{item.type === 'slider'}}" class="slider-container">
          <slider
            class="form-slider"
            value="{{projectData[item.key]}}"
            min="{{item.min || 0}}"
            max="{{item.max || 100}}"
            step="1"
            show-value
            bindchange="onSliderChange"
            data-field="{{item.key}}"
          />
          <text class="slider-unit">{{item.unit || ''}}</text>
        </view>
      </view>
    </view>

    <!-- æ–‡ä»¶ä¸Šä¼  -->
    <view class="form-section">
      <text class="section-title">æ–‡ä»¶ä¸Šä¼ </text>

      <view class="form-item">
        <text class="form-label">é¡¹ç›®æŠ¥å‘Š</text>
        <view class="upload-area" bindtap="uploadReport">
          <text class="upload-icon">ğŸ“Š</text>
          <text class="upload-text">ç‚¹å‡»ä¸Šä¼ é¡¹ç›®æŠ¥å‘Š</text>
        </view>
      </view>

      <view class="form-item">
        <text class="form-label">ç›¸å…³æ–‡ä»¶</text>
        <view class="upload-area" bindtap="uploadFiles">
          <text class="upload-icon">ğŸ“„</text>
          <text class="upload-text">ç‚¹å‡»ä¸Šä¼ ç›¸å…³æ–‡ä»¶</text>
        </view>
      </view>
    </view>

    <view class="button-group">
      <button class="save-btn" bindtap="saveProject">ä¿å­˜é¡¹ç›®</button>
      <button class="cancel-btn" bindtap="cancel">å–æ¶ˆ</button>
    </view>
  </view>
</view>
