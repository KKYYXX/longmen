<view class="document-container">
  <view class="texture-overlay"></view>
  <view class="light-spot"></view>
  
  <!-- å¤´éƒ¨å¯¼èˆª -->
  <view class="header">
    <view class="back-btn" bindtap="navigateBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="title-box">
      <text class="title">{{caseData.caseName || caseData.title}}</text>
      <text class="subtitle">{{caseData.category || 'å…¸å‹æ¡ˆä¾‹'}}</text>
    </view>
    <view class="share-btn" bindtap="shareCase">
      <text class="share-icon">â‹¯</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ–‡æ¡£å†…å®¹ -->
  <view class="document-content" wx:if="{{!loading && caseData}}">
    <!-- æ¡ˆä¾‹åŸºæœ¬ä¿¡æ¯ -->
    <view class="case-info-card">
      <view class="case-header">
        <text class="case-title">{{caseData.caseName || caseData.title}}</text>
        <text class="case-time">{{caseData.uploadTime || caseData.createDate}}</text>
      </view>
      
      <view class="case-description">
        <text class="description-label">æ¡ˆä¾‹æè¿°ï¼š</text>
        <text class="description-text">{{caseData.description || caseData.summary}}</text>
      </view>

      <!-- ç»Ÿè®¡ä¿¡æ¯ -->
      <view class="case-stats">
        <view class="stat-item">
          <text class="stat-icon">ğŸ“„</text>
          <text class="stat-text">{{fileCount}}ä¸ªæ–‡ä»¶</text>
        </view>
        <view class="stat-item">
          <text class="stat-icon">ğŸ¥</text>
          <text class="stat-text">{{videoCount}}ä¸ªè§†é¢‘</text>
        </view>
        <view class="stat-item">
          <text class="stat-icon">ğŸ”—</text>
          <text class="stat-text">{{linkCount}}ä¸ªé“¾æ¥</text>
        </view>
      </view>
    </view>

    <!-- è¯¦ç»†å†…å®¹å±•ç¤º -->
    <view class="content-sections">
      <!-- è¯¦ç»†æè¿° -->
      <view class="content-section">
        <text class="section-title">è¯¦ç»†å†…å®¹ï¼š</text>
        <view class="content-detail">
          <text class="detail-text">{{detailContent}}</text>
        </view>
      </view>

      <!-- ä¸Šä¼ æ–‡ä»¶ -->
      <view class="content-section" wx:if="{{caseData.files && caseData.files.length > 0}}">
        <text class="section-title">ğŸ“„ ä¸Šä¼ æ–‡ä»¶ï¼š</text>
        <view class="files-container">
          <view class="file-item" wx:for="{{caseData.files}}" wx:key="index">
            <view class="file-info">
              <view class="file-icon">
                <text class="icon">ğŸ“„</text>
              </view>
              <view class="file-details">
                <text class="file-name">{{item.name}}</text>
                <text class="file-size">{{item.sizeFormatted || item.size}}</text>
              </view>
            </view>
            <view class="file-actions">
              <text class="action-btn preview-btn" bindtap="previewFile" data-file="{{item}}">é¢„è§ˆ</text>
              <text class="action-btn download-btn" bindtap="downloadFile" data-file="{{item}}">ä¸‹è½½</text>
            </view>
          </view>
        </view>
      </view>

      <!-- ç›¸å…³è§†é¢‘ -->
      <view class="content-section" wx:if="{{caseData.videos && caseData.videos.length > 0}}">
        <text class="section-title">ğŸ¥ ç›¸å…³è§†é¢‘ï¼š</text>
        <view class="videos-container">
          <view class="video-item" wx:for="{{caseData.videos}}" wx:key="index">
            <view class="video-info">
              <view class="video-icon">
                <text class="icon">ğŸ¥</text>
              </view>
              <view class="video-details">
                <text class="video-name">{{item.name}}</text>
                <text class="video-duration" wx:if="{{item.duration}}">æ—¶é•¿ï¼š{{item.duration}}</text>
              </view>
            </view>
            <view class="video-actions">
              <text class="action-btn play-btn" bindtap="playVideo" data-video="{{item}}">æ’­æ”¾</text>
            </view>
          </view>
        </view>
      </view>

      <!-- æ–°é—»é“¾æ¥ -->
      <view class="content-section" wx:if="{{caseData.links && caseData.links.length > 0}}">
        <text class="section-title">ğŸ”— ç›¸å…³æ–°é—»ï¼š</text>
        <view class="links-container">
          <view class="link-item" wx:for="{{caseData.links}}" wx:key="index">
            <view class="link-info">
              <view class="link-icon">
                <text class="icon">ğŸ”—</text>
              </view>
              <view class="link-details">
                <text class="link-title">{{item.title}}</text>
                <text class="link-url">{{item.url}}</text>
              </view>
            </view>
            <view class="link-actions">
              <text class="action-btn open-btn" bindtap="openLink" data-link="{{item}}">æ‰“å¼€</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view class="error-container" wx:if="{{!loading && !caseData}}">
    <text class="error-icon">âŒ</text>
    <text class="error-title">åŠ è½½å¤±è´¥</text>
    <text class="error-desc">æ— æ³•è·å–æ¡ˆä¾‹è¯¦æƒ…ï¼Œè¯·é‡è¯•</text>
    <text class="retry-btn" bindtap="loadCaseDetail">é‡æ–°åŠ è½½</text>
  </view>
</view>
