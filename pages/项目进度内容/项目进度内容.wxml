<view class="container">



    <!-- é¡¹ç›®ä¿¡æ¯åŒºåŸŸ -->
    <view class="project-info-section" wx:if="{{projectInfo}}">
        <view class="section-title">é¡¹ç›®ä¿¡æ¯</view>
        <view class="info-item">
            <text class="info-label">é¡¹ç›®åç§°ï¼š</text>
            <text class="info-value">{{projectInfo.projectName}}</text>
        </view>
        <view class="info-item" wx:if="{{projectInfo.startDate && projectInfo.endDate}}">
            <text class="info-label">æŸ¥è¯¢æ—¶é—´ï¼š</text>
            <text class="info-value">{{projectInfo.startDate}} è‡³ {{projectInfo.endDate}}</text>
        </view>
    </view>

    <!-- æ—¶é—´æŸ¥è¯¢åŒºåŸŸ -->
    <view class="time-query-section">
        <view class="section-title">è¿›åº¦æŸ¥è¯¢</view>
        <view class="time-buttons">
            <view
                class="time-btn {{selectedTimeRange === item.value ? 'active' : ''}}"
                wx:for="{{timeRangeOptions}}"
                wx:key="value"
                bindtap="onTimeRangeSelect"
                data-value="{{item.value}}"
            >
                {{item.label}}
            </view>
        </view>

        <!-- è‡ªå®šä¹‰æ—¶é—´é€‰æ‹© -->
        <view class="custom-time-section">
            <view class="custom-time-row">
                <picker mode="date" value="{{customStartDate}}" bindchange="onCustomStartDateChange">
                    <view class="custom-date-picker">
                        <text>{{customStartDate || 'å¼€å§‹æ—¥æœŸ'}}</text>
                    </view>
                </picker>
                <text class="date-separator">è‡³</text>
                <picker mode="date" value="{{customEndDate}}" bindchange="onCustomEndDateChange">
                    <view class="custom-date-picker">
                        <text>{{customEndDate || 'ç»“æŸæ—¥æœŸ'}}</text>
                    </view>
                </picker>
                                 <view class="query-btn" bindtap="onCustomTimeQuery">æŸ¥è¯¢</view>
                 <view class="reset-btn" bindtap="resetFilter">é‡ç½®</view>
            </view>
        </view>
    </view>

    <!-- è¿›åº¦è®°å½•åŠ è½½ä¸­ -->
    <view class="progress-loading" wx:if="{{progressLoading}}">
        <text class="loading-icon">â³</text>
        <text class="loading-text">æ­£åœ¨æŸ¥è¯¢è¿›åº¦è®°å½•...</text>
    </view>

    <!-- è¿›åº¦è®°å½•åˆ—è¡¨ -->
    <view class="progress-records" wx:if="{{progressList.length > 0 && !progressLoading}}">
        <view class="records-title">è¿›åº¦è®°å½•</view>
        <view
            class="record-item"
            wx:for="{{progressList}}"
            wx:key="id"
            bindtap="selectRecord"
            data-index="{{index}}"
        >
            <!-- è®°å½•å¤´éƒ¨ï¼šæ—¶é—´ -->
            <view class="record-header">
                <view class="record-time">
                    <text class="time-icon">ğŸ“…</text>
                    <text class="time-text">{{item.date}}</text>
                </view>
                <!-- æ·»åŠ ç‚¹å‡»æç¤º -->
                <view class="click-hint">
                    <text class="hint-text">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</text>
                    <text class="hint-icon">ğŸ‘†</text>
                </view>
            </view>
            
            <!-- äººç‰©ä¿¡æ¯ -->
            <view class="record-person-section">
                <text class="person-icon">ğŸ‘¥</text>
                <text class="person-label">å‚ä¸äººå‘˜ï¼š</text>
                <text class="person-name">{{item.person}}</text>
            </view>
            
            <!-- åœ°ç‚¹ä¿¡æ¯ -->
            <view class="record-location" wx:if="{{item.location && item.location !== 'æœªçŸ¥åœ°ç‚¹'}}">
                <text class="location-icon">ğŸ“</text>
                <text class="location-label">å·¥ä½œåœ°ç‚¹ï¼š</text>
                <text class="location-text">{{item.location}}</text>
            </view>
            
                           <!-- å›¾ç‰‡åŒºåŸŸ -->
              <view class="media-section">
                  <view class="media-header">
                      <text class="media-icon">ğŸ“·</text>
                      <text class="media-label">ç°åœºå›¾ç‰‡</text>
                  </view>
                  <view class="media-content">
                      <view wx:if="{{item.originalData.practice_image_url}}" class="url-links">
                          <view wx:for="{{item.originalData.practice_image_url.split(',')}}" wx:key="index" wx:for-item="imageUrl">
                              <text wx:if="{{imageUrl.trim()}}" class="url-link" bindtap="openUrl" data-url="{{imageUrl.trim()}}">
                                  {{imageUrl.trim()}}
                              </text>
                          </view>
                      </view>
                      <view wx:else class="no-content">
                          <text class="no-content-text">æ— å†…å®¹</text>
                      </view>
                  </view>
              </view>
              
              <!-- è§†é¢‘åŒºåŸŸ -->
              <view class="media-section">
                  <view class="media-header">
                      <text class="media-icon">ğŸ¥</text>
                      <text class="media-label">ç°åœºè§†é¢‘</text>
                  </view>
                  <view class="media-content">
                      <view wx:if="{{item.originalData.video_url}}" class="url-links">
                          <text class="url-link" bindtap="openUrl" data-url="{{item.originalData.video_url}}">
                              {{item.originalData.video_url}}
                          </text>
                      </view>
                      <view wx:else class="no-content">
                          <text class="no-content-text">æ— å†…å®¹</text>
                      </view>
                  </view>
              </view>
             
             <!-- æ–°é—»ç¨¿åŒºåŸŸ -->
             <view class="media-section">
                 <view class="media-header">
                     <text class="media-icon">ğŸ“°</text>
                     <text class="media-label">æ–°é—»ç¨¿</text>
                 </view>
                 <view class="media-content">
                     <view wx:if="{{item.originalData.news}}" class="url-links">
                         <text class="url-link" bindtap="openUrl" data-url="{{item.originalData.news}}">
                             {{item.originalData.news}}
                         </text>
                     </view>
                     <view wx:else class="no-content">
                         <text class="no-content-text">æ— å†…å®¹</text>
                     </view>
                 </view>
             </view>
        </view>
    </view>

    <!-- æ— è¿›åº¦è®°å½•æç¤º -->
    <view class="no-progress" wx:if="{{showNoProgress && !progressLoading}}">
        <text class="no-progress-icon">ğŸ“‹</text>
        <text class="no-progress-text">è¯¥æ—¶é—´æ®µæš‚æ— è¿›åº¦è®°å½•</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!projectInfo}}">
        <text class="empty-icon">ğŸ—ï¸</text>
        <text class="empty-text">è¯·ä»é¡¹ç›®æŸ¥è¯¢é¡µé¢è¿›å…¥</text>
    </view>
</view>
    