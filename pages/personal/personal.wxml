<!--pages/personal/personal.wxml-->
<view class="personal-container">
  <!-- é¡¶éƒ¨è£…é¥°åŒºåŸŸ -->
  <view class="top-decoration">
    <view class="decoration-circle circle-1"></view>
    <view class="decoration-circle circle-2"></view>
    <view class="decoration-circle circle-3"></view>
  </view>

  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="header-icon">
    </view>
    <text class="title">ç”¨æˆ·ä¸­å¿ƒ</text>
    <text class="subtitle">User Center</text>
  </view>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <view class="personal-content">
    <!-- åˆ‡æ¢æŒ‰é’® -->
    <view class="switch-container">
      <view class="switch-btn {{currentMode === 'login' ? 'active' : ''}}" bindtap="switchToLogin">
        <view class="switch-icon">
          <text class="icon">ğŸ”‘</text>
        </view>
        <text class="switch-text">ç™»å½•</text>
        <text class="switch-subtext">Login</text>
      </view>
      <view class="switch-btn {{currentMode === 'register' ? 'active' : ''}}" bindtap="switchToRegister">
        <view class="switch-icon">
          <text class="icon">ğŸ“</text>
        </view>
        <text class="switch-text">æ³¨å†Œ</text>
        <text class="switch-subtext">Register</text>
      </view>
    </view>

    <!-- ç™»å½•æ¨¡å¼ -->
    <view class="form-container" wx:if="{{currentMode === 'login'}}">
      <view class="form-header">
        <text class="form-title">ç”¨æˆ·ç™»å½•</text>
        <text class="form-subtitle">User Login</text>
      </view>

      <!-- ç™»å½•æ–¹å¼åˆ‡æ¢ -->
      <view class="login-type-switch">
        <view class="type-btn {{loginType === 'phone' ? 'active' : ''}}" bindtap="switchLoginType" data-type="phone">
          <view class="type-icon">
            <text class="icon">ğŸ“±</text>
          </view>
          <text class="type-text">æ‰‹æœºå·ç™»å½•</text>
        </view>
        <view class="type-btn {{loginType === 'wechat' ? 'active' : ''}}" bindtap="switchLoginType" data-type="wechat">
          <view class="type-icon">
            <text class="icon">ğŸ’¬</text>
          </view>
          <text class="type-text">å¾®ä¿¡ç™»å½•</text>
        </view>
      </view>

      <!-- æ‰‹æœºå·ç™»å½•è¡¨å• -->
      <view class="login-form" wx:if="{{loginType === 'phone'}}">
        <!-- æ‰‹æœºå·ç è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">æ‰‹æœºå·ç </text>
          <input
            class="input-field"
            type="number"
            placeholder="è¯·è¾“å…¥11ä½æ‰‹æœºå·ç "
            value="{{loginForm.phone}}"
            bindinput="onLoginPhoneInput"
            maxlength="11"
          />
        </view>

        <!-- å¯†ç è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">å¯†ç </text>
          <view class="password-container">
            <input
              class="input-field password-input"
              type="{{showLoginPassword ? 'text' : 'password'}}"
              placeholder="è¯·è¾“å…¥å¯†ç "
              value="{{loginForm.password}}"
              bindinput="onLoginPasswordInput"
              maxlength="20"
              password="{{!showLoginPassword}}"
            />
            <view class="password-toggle" bindtap="toggleLoginPassword">
              <text class="toggle-icon">{{showLoginPassword ? 'ğŸ‘ï¸' : 'ğŸ™ˆ'}}</text>
            </view>
          </view>
        </view>

        <!-- ç™»å½•æŒ‰é’®ç»„ -->
        <view class="login-buttons">
          <button
            class="login-btn normal-login {{isLoginFormValid ? 'active' : 'disabled'}}"
            bindtap="onNormalLogin"
            disabled="{{!isLoginFormValid}}"
          >
            <view class="btn-icon">
              <text class="icon">ğŸ‘¤</text>
            </view>
            <view class="btn-content">
              <text class="btn-text">æ™®é€šç™»å½•</text>
              <text class="btn-desc">Normal Login</text>
            </view>
            <view class="btn-arrow">
              <text class="arrow">â€º</text>
            </view>
          </button>
          
          <button
            class="login-btn admin-login {{isLoginFormValid ? 'active' : 'disabled'}}"
            bindtap="onAdminLogin"
            disabled="{{!isLoginFormValid}}"
          >
            <view class="btn-icon">
              <text class="icon">âš™ï¸</text>
            </view>
            <view class="btn-content">
              <text class="btn-text">æƒé™ç®¡ç†ç™»å½•</text>
              <text class="btn-desc">Admin Login</text>
            </view>
            <view class="btn-arrow">
              <text class="arrow">â€º</text>
            </view>
          </button>
        </view>
      </view>

      <!-- å¾®ä¿¡ç™»å½•è¡¨å• -->
      <view class="login-form" wx:if="{{loginType === 'wechat'}}">
        <!-- å¾®ä¿¡å·è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">å¾®ä¿¡å·</text>
          <input
            class="input-field"
            type="text"
            placeholder="è¯·è¾“å…¥å¾®ä¿¡å·"
            value="{{loginForm.wechat}}"
            bindinput="onLoginWechatInput"
            maxlength="20"
          />
        </view>

        <!-- å¯†ç è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">å¯†ç </text>
          <view class="password-container">
            <input
              class="input-field password-input"
              type="{{showLoginPassword ? 'text' : 'password'}}"
              placeholder="è¯·è¾“å…¥å¯†ç "
              value="{{loginForm.password}}"
              bindinput="onLoginPasswordInput"
              maxlength="20"
              password="{{!showLoginPassword}}"
            />
            <view class="password-toggle" bindtap="toggleLoginPassword">
              <text class="toggle-icon">{{showLoginPassword ? 'ğŸ‘ï¸' : 'ğŸ™ˆ'}}</text>
            </view>
          </view>
        </view>

        <!-- ç™»å½•æŒ‰é’®ç»„ -->
        <view class="login-buttons">
          <button
            class="login-btn normal-login {{isLoginFormValid ? 'active' : 'disabled'}}"
            bindtap="onNormalLogin"
            disabled="{{!isLoginFormValid}}"
          >
            <view class="btn-icon">
              <text class="icon">ğŸ‘¤</text>
            </view>
            <view class="btn-content">
              <text class="btn-text">æ™®é€šç™»å½•</text>
              <text class="btn-desc">Normal Login</text>
            </view>
            <view class="btn-arrow">
              <text class="arrow">â€º</text>
            </view>
          </button>
          
          <button
            class="login-btn admin-login {{isLoginFormValid ? 'active' : 'disabled'}}"
            bindtap="onAdminLogin"
            disabled="{{!isLoginFormValid}}"
          >
            <view class="btn-icon">
              <text class="icon">âš™ï¸</text>
            </view>
            <view class="btn-content">
              <text class="btn-text">æƒé™ç®¡ç†ç™»å½•</text>
              <text class="btn-desc">Admin Login</text>
            </view>
            <view class="btn-arrow">
              <text class="arrow">â€º</text>
            </view>
          </button>
        </view>
      </view>
    </view>

    <!-- æ³¨å†Œæ¨¡å¼ -->
    <view class="form-container" wx:if="{{currentMode === 'register'}}">
      <view class="form-header">
        <text class="form-title">ç”¨æˆ·æ³¨å†Œ</text>
        <text class="form-subtitle">User Registration</text>
      </view>

      <view class="register-form">
        <!-- å§“åè¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">å§“å</text>
          <input
            class="input-field"
            type="text"
            placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å"
            value="{{registerForm.name}}"
            bindinput="onRegisterNameInput"
            maxlength="20"
          />
        </view>

        <!-- æ‰‹æœºå·ç è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">æ‰‹æœºå·ç </text>
          <input
            class="input-field"
            type="number"
            placeholder="è¯·è¾“å…¥11ä½æ‰‹æœºå·ç "
            value="{{registerForm.phone}}"
            bindinput="onRegisterPhoneInput"
            maxlength="11"
          />
        </view>

        <!-- å¾®ä¿¡å·è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">å¾®ä¿¡å·</text>
          <input
            class="input-field"
            type="text"
            placeholder="è¯·è¾“å…¥å¾®ä¿¡å·"
            value="{{registerForm.wechat}}"
            bindinput="onRegisterWechatInput"
            maxlength="20"
          />
        </view>

        <!-- å¯†ç è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">å¯†ç </text>
          <view class="password-container">
            <input
              class="input-field password-input"
              type="{{showRegisterPassword ? 'text' : 'password'}}"
              placeholder="è¯·è¾“å…¥ä¸å°‘äº8ä½å¯†ç "
              value="{{registerForm.password}}"
              bindinput="onRegisterPasswordInput"
              maxlength="20"
              password="{{!showRegisterPassword}}"
            />
            <view class="password-toggle" bindtap="toggleRegisterPassword">
              <text class="toggle-icon">{{showRegisterPassword ? 'ğŸ‘ï¸' : 'ğŸ™ˆ'}}</text>
            </view>
          </view>
        </view>

        <!-- ç¡®è®¤å¯†ç è¾“å…¥ -->
        <view class="input-group">
          <text class="input-label">ç¡®è®¤å¯†ç </text>
          <view class="password-container">
            <input
              class="input-field password-input"
              type="{{showConfirmPassword ? 'text' : 'password'}}"
              placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
              value="{{registerForm.confirmPassword}}"
              bindinput="onConfirmPasswordInput"
              maxlength="20"
              password="{{!showConfirmPassword}}"
            />
            <view class="password-toggle" bindtap="toggleRegisterPassword">
              <text class="toggle-icon">{{showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ™ˆ'}}</text>
            </view>
          </view>
        </view>

        <!-- å¯†ç è¦æ±‚æç¤º -->
        <view class="password-hint">
          <view class="hint-icon">
            <text class="icon">â„¹ï¸</text>
          </view>
          <text class="hint-text">å¯†ç è¦æ±‚ï¼šä¸å°‘äº8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—</text>
        </view>

        <!-- æ³¨å†ŒæŒ‰é’® -->
        <button
          class="submit-btn {{isRegisterFormValid ? 'active' : 'disabled'}}"
          bindtap="onRegister"
          disabled="{{!isRegisterFormValid}}"
        >
          <view class="btn-icon">
            <text class="icon">âœ…</text>
          </view>
          <view class="btn-content">
            <text class="btn-text">æ³¨å†Œ</text>
            <text class="btn-desc">Register Account</text>
          </view>
          <view class="btn-arrow">
            <text class="arrow">â€º</text>
          </view>
        </button>
      </view>
    </view>

    <!-- é”™è¯¯æç¤º -->
    <view class="error-message" wx:if="{{errorMessage}}">
      <view class="error-card">
        <view class="error-icon">
          <text class="icon">âš ï¸</text>
        </view>
        <text class="error-text">{{errorMessage}}</text>
      </view>
    </view>
  </view>


  <!-- åº•éƒ¨è£…é¥° -->
  <view class="bottom-decoration">
    <view class="decoration-line"></view>
    <view class="decoration-dots">
      <view class="dot"></view>
      <view class="dot"></view>
      <view class="dot"></view>
    </view>
  </view>
</view>