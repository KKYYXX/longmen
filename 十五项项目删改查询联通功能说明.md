# åäº”é¡¹é¡¹ç›®åˆ æ”¹æŸ¥è¯¢è”é€šåŠŸèƒ½

## åŠŸèƒ½æ¦‚è¿°

å®ç°äº†åäº”é¡¹é¡¹ç›®çš„æŸ¥è¯¢ã€ç¼–è¾‘ã€åˆ é™¤åŠŸèƒ½çš„å®Œå…¨è”é€šï¼Œç”¨æˆ·å¯ä»¥åœ¨æŸ¥è¯¢é¡µé¢ç›´æ¥è¿›è¡Œåˆ æ”¹æ“ä½œï¼Œæ‰€æœ‰å˜æ›´éƒ½ä¼šå®æ—¶æ˜¾ç¤ºã€‚

## è”é€šåŠŸèƒ½ç‰¹æ€§

### ğŸ” **æŸ¥è¯¢é¡µé¢é›†æˆæ“ä½œ**
- **é¡¹ç›®åˆ—è¡¨å¿«æ·æ“ä½œ**ï¼šæ¯ä¸ªé¡¹ç›®å¡ç‰‡å³ä¾§æä¾›ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’®
- **è¯¦æƒ…å¼¹çª—æ“ä½œ**ï¼šé¡¹ç›®è¯¦æƒ…å¼¹çª—å¤´éƒ¨æä¾›ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’®
- **å®æ—¶æ•°æ®æ›´æ–°**ï¼šæ‰€æœ‰æ“ä½œåç«‹å³æ›´æ–°åˆ—è¡¨æ˜¾ç¤º

### âœï¸ **ç¼–è¾‘åŠŸèƒ½è”é€š**
- **ä¸€é”®è·³è½¬ç¼–è¾‘**ï¼šä»æŸ¥è¯¢é¡µé¢ç›´æ¥è·³è½¬åˆ°ç¼–è¾‘é¡µé¢
- **æ•°æ®è‡ªåŠ¨ä¼ é€’**ï¼šé€‰ä¸­çš„é¡¹ç›®æ•°æ®è‡ªåŠ¨ä¼ é€’ç»™ç¼–è¾‘é¡µé¢
- **ç¼–è¾‘æ¨¡å¼è¯†åˆ«**ï¼šç¼–è¾‘é¡µé¢è‡ªåŠ¨è¯†åˆ«æ˜¯ç¼–è¾‘æ¨¡å¼è¿˜æ˜¯æ–°å¢æ¨¡å¼
- **è¿”å›è‡ªåŠ¨åˆ·æ–°**ï¼šç¼–è¾‘å®Œæˆè¿”å›æ—¶è‡ªåŠ¨åˆ·æ–°æŸ¥è¯¢é¡µé¢æ•°æ®

### ğŸ—‘ï¸ **åˆ é™¤åŠŸèƒ½è”é€š**
- **ç¡®è®¤å¯¹è¯æ¡†**ï¼šåˆ é™¤å‰æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼Œé˜²æ­¢è¯¯æ“ä½œ
- **å®æ—¶ç§»é™¤**ï¼šåˆ é™¤æˆåŠŸåç«‹å³ä»åˆ—è¡¨ä¸­ç§»é™¤é¡¹ç›®
- **å¼¹çª—è‡ªåŠ¨å…³é—­**ï¼šå¦‚æœåˆ é™¤çš„æ˜¯å½“å‰æŸ¥çœ‹çš„é¡¹ç›®ï¼Œè‡ªåŠ¨å…³é—­è¯¦æƒ…å¼¹çª—

## æ“ä½œæµç¨‹

### ç¼–è¾‘é¡¹ç›®æµç¨‹
```
æŸ¥è¯¢é¡µé¢ â†’ ç‚¹å‡»ç¼–è¾‘æŒ‰é’® â†’ è·³è½¬ç¼–è¾‘é¡µé¢ â†’ ä¿®æ”¹å†…å®¹ â†’ ä¿å­˜ â†’ è¿”å›æŸ¥è¯¢é¡µé¢ â†’ è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤º
```

### åˆ é™¤é¡¹ç›®æµç¨‹
```
æŸ¥è¯¢é¡µé¢ â†’ ç‚¹å‡»åˆ é™¤æŒ‰é’® â†’ ç¡®è®¤å¯¹è¯æ¡† â†’ ç¡®è®¤åˆ é™¤ â†’ ä»åˆ—è¡¨ç§»é™¤ â†’ æ˜¾ç¤ºåˆ é™¤æˆåŠŸ
```

## æŠ€æœ¯å®ç°

### æ•°æ®ä¼ é€’æœºåˆ¶
ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºçš„å…¨å±€æ•°æ® `app.globalData` è¿›è¡Œé¡µé¢é—´æ•°æ®ä¼ é€’ï¼š

```javascript
// å…¨å±€æ•°æ®ç»“æ„
globalData: {
  editingProject: null,    // æ­£åœ¨ç¼–è¾‘çš„é¡¹ç›®æ•°æ®
  updatedProject: null,    // æ›´æ–°åçš„é¡¹ç›®æ•°æ®
  newProject: null         // æ–°æ·»åŠ çš„é¡¹ç›®æ•°æ®
}
```

### é¡µé¢è”é€šé€»è¾‘

#### æŸ¥è¯¢é¡µé¢ â†’ ç¼–è¾‘é¡µé¢
1. ç”¨æˆ·ç‚¹å‡»ç¼–è¾‘æŒ‰é’®
2. å°†é¡¹ç›®æ•°æ®å­˜å‚¨åˆ° `app.globalData.editingProject`
3. è·³è½¬åˆ°ç¼–è¾‘é¡µé¢å¹¶ä¼ é€’é¡¹ç›®ID
4. ç¼–è¾‘é¡µé¢è‡ªåŠ¨åŠ è½½é¡¹ç›®æ•°æ®å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼

#### ç¼–è¾‘é¡µé¢ â†’ æŸ¥è¯¢é¡µé¢
1. ç”¨æˆ·å®Œæˆç¼–è¾‘å¹¶ä¿å­˜
2. å°†æ›´æ–°åçš„æ•°æ®å­˜å‚¨åˆ° `app.globalData.updatedProject`
3. è¿”å›æŸ¥è¯¢é¡µé¢
4. æŸ¥è¯¢é¡µé¢ `onShow` æ£€æµ‹åˆ°æ›´æ–°æ•°æ®ï¼Œè‡ªåŠ¨åˆ·æ–°åˆ—è¡¨

### æ ¸å¿ƒæ–¹æ³•

#### æŸ¥è¯¢é¡µé¢æ ¸å¿ƒæ–¹æ³•
```javascript
// ç¼–è¾‘é¡¹ç›®
onEditProject(e) {
  const project = e.currentTarget.dataset.project;
  getApp().globalData.editingProject = project;
  wx.navigateTo({
    url: '/pages/fifteenprojects_modify/fifteenprojects_modify?projectId=' + project.id
  });
}

// åˆ é™¤é¡¹ç›®
onDeleteProject(e) {
  const project = e.currentTarget.dataset.project;
  this.showDeleteConfirm(project);
}

// æ›´æ–°åˆ—è¡¨ä¸­çš„é¡¹ç›®
updateProjectInList(updatedProject) {
  const projectList = this.data.projectList.map(item => {
    if (item.id === updatedProject.id) {
      return { ...item, ...updatedProject };
    }
    return item;
  });
  this.setData({ projectList });
}
```

#### ç¼–è¾‘é¡µé¢æ ¸å¿ƒæ–¹æ³•
```javascript
// é¡µé¢åŠ è½½æ—¶æ£€æµ‹ç¼–è¾‘æ¨¡å¼
onLoad(options) {
  if (options.projectId) {
    this.setData({
      editMode: true,
      editingProjectId: parseInt(options.projectId)
    });
    
    const app = getApp();
    if (app.globalData.editingProject) {
      this.setData({
        selectedProject: app.globalData.editingProject,
        currentStep: 2 // ç›´æ¥è·³åˆ°é€‰æ‹©åˆ—çš„æ­¥éª¤
      });
    }
  }
}

// ä¿å­˜æ—¶åŒºåˆ†ç¼–è¾‘å’Œæ–°å¢æ¨¡å¼
saveModification() {
  // ... ä¿å­˜é€»è¾‘ ...
  
  if (isSuccess) {
    const app = getApp();
    app.globalData.updatedProject = updatedProject;
    
    if (this.data.editMode) {
      wx.navigateBack(); // ç¼–è¾‘æ¨¡å¼è¿”å›
    } else {
      // æ–°å¢æ¨¡å¼é‡ç½®çŠ¶æ€
    }
  }
}
```

## ç”¨æˆ·ç•Œé¢

### æŸ¥è¯¢é¡µé¢æ“ä½œæŒ‰é’®
- **é¡¹ç›®åˆ—è¡¨**ï¼šæ¯ä¸ªé¡¹ç›®å³ä¾§æ˜¾ç¤ºç¼–è¾‘(âœï¸)å’Œåˆ é™¤(ğŸ—‘ï¸)åœ†å½¢æŒ‰é’®
- **è¯¦æƒ…å¼¹çª—**ï¼šå¤´éƒ¨æ˜¾ç¤ºç¼–è¾‘å’Œåˆ é™¤æŒ‰é’®ï¼Œæ ·å¼ç»Ÿä¸€

### æŒ‰é’®æ ·å¼ç‰¹è‰²
- **ç¼–è¾‘æŒ‰é’®**ï¼šæµ…é»„è‰²æ¸å˜èƒŒæ™¯ï¼Œä¸ä¸»é¢˜è‰²åè°ƒ
- **åˆ é™¤æŒ‰é’®**ï¼šæµ…çº¢è‰²æ¸å˜èƒŒæ™¯ï¼Œè­¦ç¤ºä½œç”¨
- **æ‚¬åœæ•ˆæœ**ï¼šæŒ‰é’®æœ‰ç¼©æ”¾åŠ¨ç”»ï¼Œæä¾›è‰¯å¥½çš„äº¤äº’åé¦ˆ

## æ•°æ®åº“æ¥å£é¢„ç•™

æ‰€æœ‰åŠŸèƒ½éƒ½é¢„ç•™äº†åç«¯APIæ¥å£è°ƒç”¨ä½ç½®ï¼š

### ç¼–è¾‘æ¥å£
```javascript
// PUT /api/fifteen-projects/{id}
wx.request({
  url: `http://127.0.0.1:5000/api/fifteen-projects/${project.id}`,
  method: 'PUT',
  data: updatedData,
  header: {
    'Authorization': `Bearer ${wx.getStorageSync('token')}`
  }
});
```

### åˆ é™¤æ¥å£
```javascript
// DELETE /api/fifteen-projects/{id}
wx.request({
  url: `http://127.0.0.1:5000/api/fifteen-projects/${project.id}`,
  method: 'DELETE',
  header: {
    'Authorization': `Bearer ${wx.getStorageSync('token')}`
  }
});
```

### æŸ¥è¯¢æ¥å£
```javascript
// GET /api/fifteen-projects/list
wx.request({
  url: 'http://127.0.0.1:5000/api/fifteen-projects/list',
  method: 'GET',
  data: {
    page: this.data.page,
    pageSize: this.data.pageSize,
    keyword: this.data.searchKeyword,
    startDate: this.data.startDate,
    endDate: this.data.endDate
  }
});
```

## ä½¿ç”¨è¯´æ˜

### ç¼–è¾‘é¡¹ç›®
1. åœ¨æŸ¥è¯¢é¡µé¢æ‰¾åˆ°è¦ç¼–è¾‘çš„é¡¹ç›®
2. ç‚¹å‡»é¡¹ç›®å¡ç‰‡å³ä¾§çš„ç¼–è¾‘æŒ‰é’®(âœï¸)æˆ–è¯¦æƒ…å¼¹çª—ä¸­çš„ç¼–è¾‘æŒ‰é’®
3. è‡ªåŠ¨è·³è½¬åˆ°ç¼–è¾‘é¡µé¢ï¼Œé¡¹ç›®å·²é¢„é€‰
4. é€‰æ‹©è¦ä¿®æ”¹çš„åˆ—ï¼Œè¿›è¡Œç¼–è¾‘æˆ–æ·»åŠ å†…å®¹
5. ä¿å­˜åè‡ªåŠ¨è¿”å›æŸ¥è¯¢é¡µé¢ï¼Œå¯çœ‹åˆ°æ›´æ–°åçš„å†…å®¹

### åˆ é™¤é¡¹ç›®
1. åœ¨æŸ¥è¯¢é¡µé¢æ‰¾åˆ°è¦åˆ é™¤çš„é¡¹ç›®
2. ç‚¹å‡»é¡¹ç›®å¡ç‰‡å³ä¾§çš„åˆ é™¤æŒ‰é’®(ğŸ—‘ï¸)æˆ–è¯¦æƒ…å¼¹çª—ä¸­çš„åˆ é™¤æŒ‰é’®
3. åœ¨ç¡®è®¤å¯¹è¯æ¡†ä¸­ç‚¹å‡»"åˆ é™¤"
4. é¡¹ç›®ç«‹å³ä»åˆ—è¡¨ä¸­ç§»é™¤ï¼Œæ˜¾ç¤ºåˆ é™¤æˆåŠŸæç¤º

### æŸ¥çœ‹è¿›åº¦è®°å½•
1. ç‚¹å‡»é¡¹ç›®å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
2. åœ¨è¯¦æƒ…å¼¹çª—ä¸­é€‰æ‹©æ—¶é—´èŒƒå›´
3. æŸ¥çœ‹è¯¥æ—¶é—´æ®µå†…çš„"æŸäººæŸæ—¶æŸåœ°å¹²äº†æŸäº‹"è®°å½•

## ä¼˜åŠ¿ç‰¹ç‚¹

- **æ“ä½œä¾¿æ·**ï¼šæ— éœ€è·³è½¬å¤šä¸ªé¡µé¢ï¼Œåœ¨æŸ¥è¯¢é¡µé¢å³å¯å®Œæˆæ‰€æœ‰æ“ä½œ
- **æ•°æ®åŒæ­¥**ï¼šæ‰€æœ‰æ“ä½œç«‹å³åæ˜ åœ¨ç•Œé¢ä¸Šï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°
- **ç”¨æˆ·å‹å¥½**ï¼šæ¸…æ™°çš„æ“ä½œåé¦ˆå’Œç¡®è®¤æœºåˆ¶
- **æ‰©å±•æ€§å¼º**ï¼šé¢„ç•™å®Œæ•´çš„åç«¯æ¥å£ï¼Œæ˜“äºæ¥å…¥çœŸå®æ•°æ®åº“
- **ä¸€è‡´æ€§å¥½**ï¼šæ‰€æœ‰æ“ä½œä¿æŒç»Ÿä¸€çš„è§†è§‰é£æ ¼å’Œäº¤äº’æ¨¡å¼
